{% extends 'base.html' %}
{% load staticfiles %}

{% block videoclases-active %}class="menu-top-active"{% endblock %}

{% block extra-head %}
    {{ form.media }}
    <link href="{% static "css/src/my-style.css" %}" rel="stylesheet">
    <script src="{% static "js/libs/jquery.validate.min.js" %}"></script>
    <script src="{% static "js/src/enviarVideoclase.js" %}"></script>
    <script src="{% static "js/src/enviarVideoclaseDocumentReady.js" %}"></script>
{% endblock %}

{% block body %}
    <div class="content-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-md-2 col-md-offset-10">
                    <button onclick="location.href = '{% url 'alumno' %}';" class="btn btn-info">Volver</button>
                </div>
            </div>
            <div class="row">
                <div id="top-form-head-line" class="col-md-12">
                    <h6 class="page-head-line">{{ user.alumno.curso_actual.colegio.nombre }} - {{ user.alumno.curso_actual.nombre }} - {{ user.get_full_name }}</h6>
                </div>
            </div>
            {% if messages %}
            <div class="row">
                <div class="alert alert-info alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    {% for message in messages %}
                    <div align="center">{{ message }}</div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            <div class="row" data-bind="visible: formErrorsVisible">
                <div class="alert alert-danger alert-dismissible" role="alert">
                    <button type="button" class="close" data-bind="click: function() {changeFormErrorsVisible(false)}" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <div align="center">
                        <!-- ko foreach: formErrors -->
                            <span data-bind="text: $data"></span><br/>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
            <div class="row">
                <div align="center" class="col-md-6">
                    Explicación del profesor
                    {% if videoclase.grupo.tarea.video %}
                    <iframe width="100%" height="315" src="{{ videoclase.grupo.tarea.video }}" frameborder="0" allowfullscreen></iframe>
                    {% else %}
                    <div align="center"><span>Esta tarea no tiene video explicativo</span></div>
                    {% endif %}
                </div>
                <div class="col-md-6">
                    <div class="panel panel-default">
                        <div class="panel-heading" style="line-height:1.3;">
                            <h4>{{ videoclase.grupo.tarea.titulo }} - 
                                    {% if videoclase.grupo.tarea.get_estado == 1 %}
                                        {% if videoclase.alumnos_subida %}
                                        Editando
                                        {% else %}
                                        Tarea pendiente
                                        {% endif %}
                                    {% elif videoclase.grupo.tarea.get_estado == 2 %}
                                    {{ videoclase.grupo.tarea.get_estado_nombre }}
                                    {% else %}
                                    {{ videoclase.grupo.tarea.get_estado_nombre }}
                                    {% endif %}</h4>
                            Profesor(a) {{ videoclase.grupo.tarea.profesor.usuario.get_full_name }} - Fecha límite para subir VideoClase: {{ videoclase.grupo.tarea.fecha_subida|date:'d-m-Y' }}
                        </div>
                        <form id="enviar-videoclase-form" method="post">
                            {% csrf_token %}
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-md-4">Link de VideoClase</div>
                                    <div class="col-md-8">
                                        <input name="{{ form.video.name }}" id="videoLink" type="text" class="form-control" maxlength="100" placeholder="Copiar link de video en Youtube" value="{{ form.initial.video }}" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">Pregunta</div>
                                    <div class="col-md-8">
                                        <input name="{{ form.pregunta.name }}" class="form-control" maxlength="100" type="text" value="{{ form.initial.pregunta }}"></input>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">Alternativa correcta</div>
                                    <div class="col-md-8">
                                        <input name="{{ form.alternativa_correcta.name }}" class="form-control" maxlength="100" type="text" value="{{ form.initial.alternativa_correcta }}"></input>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">Alternativa 2</div>
                                    <div class="col-md-8">
                                        <input name="{{ form.alternativa_2.name }}" class="form-control" maxlength="100" type="text" value="{{ form.initial.alternativa_2 }}"></input>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">Alternativa 3</div>
                                    <div class="col-md-8">
                                        <input name="{{ form.alternativa_3.name }}" class="form-control" maxlength="100" type="text" value="{{ form.initial.alternativa_3 }}"></input>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-success">Enviar</button>
                            </div>
                        </form>
                </div>
            </div>
            </div>
        </div>
    </div>
{% endblock %}